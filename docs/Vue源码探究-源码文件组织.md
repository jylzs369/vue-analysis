# Vue源码探究-源码文件组织
---
> 源码探究基于最新开发分支，当前发布版本为v2.5.17-beta.0

Vue 2.0版本的大整改不仅在于使用功能上的优化和调整，整个代码库也发生了天翻地覆的重组。可见随着使用者的增加与声名传播，Vue自身的格局发生了很大的突破，特别体现在对Weex框架做了内部支持。不管在未来是使用Weex或者与NativeScript结合做跨平台应用开发，都还是能与React、Angular保持三足鼎立的势头。

## Vue的github仓库根目录
先来大致了解一下整个项目的结构：(摘译自[官方说明文档](https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md#project-structure))
- **`scripts`**：包含构建相关的脚本和配置文件。作者声明一般开发不需要关注此目录
- **`dist`**：构建出的不同分发版本，只有发布新版本时才会跟新，开发分支的新特性不会反映在此
- **`flow`**：包含使用[Flow](https://flow.org/)（静态类型检查工具）声明的类型，供全局使用
- **`packages`**：包含服务器端渲染和模板编译器两种不同的NPM包，是提供给不同使用场景使用的
- **`test`**：包含所有测试代码
- **`src`**：Vue的源码，使用ES6和Flow类型注释编写的

以下是官方文档未列出说明的文件夹，好奇宝宝抱着刨根问底的决心一并在此列出：
- **`.github`**：项目相关的说明文档，上面的说明文档就在此文件夹
- **`types`**：使用TypeScript定义的类型声明，不太明白为什么要同时使用两种静态类型检查语言
- **`examples`**：一些示例
- **`.circleci`**：包含CircleCI部署工具的配置文件
- **`benchmark`**： Benchmark性能测试相关文件

根目录下的其他配置文件相信大家都心知肚明有什么作用，不在此赘述了。

基于以上的大致了解，发现除 `flow` 和 `src` 目录外，其他的文件夹主要都是用来服务于Vue项目组织和构建的，在源码探究的旅途中可以将他们剔除。由于 `flow` 文件夹里包含了一些预先定义好的静态类型，是与源码编写相关的，还是需要浏览一下。接下来，继续详细的探索一下 `src` 源码文件夹的组织结构。

---

## Vue的src源码目录
Vue的源码文件夹下分为6个目录`compiler`、`core`、`platforms`、`server`、`sfc`、`shared`。

### Core 核心
- 干什么的？
- 包含部分？
core核心代码，包括Vue类的创建、组件、全局API、观察者、Vdom、辅助工具。

- 分别做了什么？

### Observer 观察者
### Vdom 虚拟节点树
### Global-API 全局API
### Components 组件

- 拆分原因？


### Compiler 编译器
- 干什么的？
- 包含部分？
- 分别做了什么？
- 拆分原因？

### Platforms 平台
- 干什么的？
- 包含部分？
包含浏览器版本和与Weex框架的融合部分
- 分别做了什么？
- 拆分原因？

### Server 服务器渲染
- 干什么的？
- 包含部分？
- 分别做了什么？
- 拆分原因？

### Sfc 单文件组件文件编译
**拆分原因**：单独抽离解析vue单文件组件的逻辑
> 这一文件夹目前只包含了一个叫parser.js的文件，用来将单文件组件解析为SFC描述对象，输出给编译器继而执行模板编译。


## **Shared 共享常量和函数**
**拆分原因**：更好的组织代码
> Shared是2.0版本之后增加的用来组织共享变量和辅助函数的文件夹，主要从之前的辅助函数文件里抽取出来，在后来的开发中也继续添加了其他函数和常量，从其中包含的constants.js和util.js两个文件的名称中也能显而易见此文件夹的作用。

---

关于为何要花心思来分析一个项目的文件组织方式和目录结构，并不是因为我有着一套成熟的学习项目源代码的方式，而是因为我觉得可能会有一些人与我一样，无法任由那些不懂的东西残留在视线范围内，所以到此为止，带着各种问题探索完了Vue仓库的文件组织，感觉自己对于整个Vue项目的组织有了更深入的了解，为继续解读具体功能的实现排除了无关影响因素，扫清了路障。如有问题欢迎大家指正。
